# API-документация для воркера шахматного движка

Этот документ описывает API, предоставляемое каждым дроном-воркером для участия в децентрализованных вычислениях.

## Базовый URL

API доступно по базовому URL дрона, например: `http://drone15.local:8080/`

---

## 1. Проверка состояния

Этот роут используется для проверки, что воркер запущен и готов к работе.

- **URL:** `/health`
- **Метод:** `GET`
- **Параметры:** Нет
- **Тело запроса:** Нет

**Пример использования (curl):**
```bash
curl http://drone15.local:8080/health
```

**Пример успешного ответа:**
```json
{
  "status": "ok"
}
```

---

## 2. Оценка позиции (основной роут для вычислений)

Этот роут является основной точкой для распределенного решения. Мастер отправляет сюда позицию для анализа, а воркер возвращает ее оценку.

- **URL:** `/evaluate`
- **Метод:** `POST`
- **Заголовки:**
  - `Content-Type: application/json`
- **Тело запроса:**
  - `fen` (string, required): Позиция на доске в формате FEN.
  - `movetime` (integer, required): Максимальное время на анализ в миллисекундах.

**Пример тела запроса:**
```json
{
  "fen": "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",
  "movetime": 5000
}
```

**Пример использования (curl):**
```bash
curl -X POST http://drone15.local:8080/evaluate \
-H "Content-Type: application/json" \
-d '{
  "fen": "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",
  "movetime": 5000
}'
```

**Пример успешного ответа:**
```json
{
  "score_cp": 25
}
```
*`score_cp` - оценка позиции в сантипешках. Положительное значение означает преимущество белых, отрицательное - преимущество черных.*

---

## 3. Отправка итогового результата (агрегация)

Этот роут предназначен для получения итогового результата анализа ветки от воркера. В текущей реализации он просто выводит полученные данные в консоль. В более сложной системе здесь могла бы быть логика для сравнения и выбора лучшего из всех полученных результатов.

- **URL:** `/submit_result`
- **Метод:** `POST`
- **Заголовки:**
  - `Content-Type: application/json`
- **Тело запроса:**
  - `score_cp` (integer, required): Итоговая оценка проанализированной ветки.

**Пример тела запроса:**
```json
{
  "score_cp": 130
}
```

**Пример использования (curl):**
```bash
curl -X POST http://drone15.local:8080/submit_result \
-H "Content-Type: application/json" \
-d '{"score_cp": 130}'
```

**Пример успешного ответа:**
```json
{
  "status": "result received"
}
