Loaded DRONE_NAME=drone15
Loaded INITIAL_LETTER=d
Loaded DRONE_ROLE=queen
Loaded DRONE_ROLE_DRONE15=queen
Loaded DRONE_ROLE_DRONE21=king
Loaded DRONE_COLOR=black
Loaded LOG_LEVEL=INFO
Loaded FLIGHT_IMPL=mock
Loaded ROVER_IMPL=mock
Loaded CAMERA_IMPL=mock
Loaded COMM_IMPL=wifi
Loaded CAMERA_API_URL=http://192.168.1.119:8001/api/positions
Loaded ALG_MODE=api
Loaded CLUSTER_HOSTFILE=/home/pi/cluster_hosts
Loaded CLUSTER_NP=4
[drone15] 10:34:12 - INFO - ðŸ”§ MOCK MODE: Flight controller initialized
INITIALIZING COMM_IMPL: wifi
[drone15] 10:34:12 - INFO - WifiEspController initialized on 0.0.0.0:47000, leader=True, drone=drone15
[drone15] 10:34:12 - INFO - Custom message callback set
[drone15] 10:34:12 - INFO - ESP message handler registered
[drone15] 10:34:12 - INFO - Available drones: ['drone15', 'drone21']
[drone15] 10:34:12 - INFO - Drone role: queen, color: black, initial_letter: d
[drone15] 10:34:12 - INFO - Drone drone15 mapped to unique role: queen
[drone15] 10:34:12 - INFO - Drone drone21 mapped to unique role: king
[drone15] 10:34:12 - INFO - Camera controller initialized: URL=http://192.168.1.119:8001/api/positions
[drone15] 10:34:12 - INFO - Mock camera controller bound to http://192.168.1.119:8001/api/positions
[drone15] 10:34:12 - INFO - Our team: black
[drone15] 10:34:12 - INFO - Starting chess drone MAIN LOOP (dynamic leadership)...
[drone15] 10:34:12 - INFO - === Leader run_once call ===
[camera] 10:34:12 - INFO - Camera controller initialized: URL=http://192.168.1.119:8001/api/positions
[camera] 10:34:12 - INFO - Mock camera controller bound to http://192.168.1.119:8001/api/positions
GOT BOARD: rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1
[drone15] 10:34:12 - INFO - Not our turn. Current turn is white, we are black. Waiting.
[drone15] 10:34:17 - INFO - === Leader run_once call ===
GOT BOARD: rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1
[drone15] 10:34:17 - INFO - Not our turn. Current turn is white, we are black. Waiting.
[drone15] 10:34:22 - INFO - === Leader run_once call ===
GOT BOARD: rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1
[drone15] 10:34:23 - INFO - Not our turn. Current turn is white, we are black. Waiting.
[drone15] 10:34:28 - INFO - === Leader run_once call ===
GOT BOARD: rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1
OUR TURN: black
SENDING FEN TO SF: rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1
==== RAW STOCKFISH DATA: {'text': 'Move e2 â†’ e4 (e4): [0.25]. The game is balanced. Depth 12.', 'captured': False, 'promotion': False, 'isCapture': False, 'isPromotion': False, 'isCastling': False, 'fen': 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1', 'type': 'bestmove', 'depth': 12, 'move': 'e2e4', 'eval': 0.25, 'centipawns': '25', 'mate': None, 'continuationArr': ['e7e5', 'g1f3', 'b8c6', 'b1c3', 'g8f6', 'd2d4', 'e5d4', 'f3d4', 'f8c5', 'd4b3', 'c5b6', 'c1g5', 'h7h6', 'g5h4', 'd7d6', 'f1e2'], 'debug': 'info depth 12 seldepth 21 multipv 1 score cp 25 nodes 107734 nps 21546800 hashfull 36 tbhits 0 time 5 pv e2e4 e7e5 g1f3 b8c6 b1c3 g8f6 d2d4 e5d4 f3d4 f8c5 d4b3 c5b6 c1g5 h7h6 g5h4 d7d6 f1e2', 'winChance': 52.29967635676993, 'taskId': '5mnf5vicf', 'turn': 'w', 'color': 'w', 'piece': 'p', 'from': 'e2', 'to': 'e4', 'san': 'e4', 'flags': 'b', 'lan': 'e2e4', 'fromNumeric': '52', 'toNumeric': '54', 'continuation': [{'from': 'e7', 'to': 'e5', 'fromNumeric': '57', 'toNumeric': '55'}, {'from': 'g1', 'to': 'f3', 'fromNumeric': '71', 'toNumeric': '63'}]}
NOT OUR TURN: w != b
GOT MOVE: MoveDecision(uci='', from_cell='', to_cell='', score_cp=None, is_mate=False, reason=None, meta=None)
[drone15] 10:34:28 - INFO - MOVING ->
[drone15] 10:34:28 - INFO - Executing piece move -> with drone
PIECE TYPE: None
[drone15] 10:34:28 - WARNING - No piece found on  by camera, using fallback
[drone15] 10:34:28 - INFO - Piece king on  -> drone drone21
[drone15] 10:34:28 - INFO - Checking if target drone drone21 is alive before sending command
[drone15] 10:34:29 - INFO - Leader sending chess move: -> to drone drone21
BROADCASTING RELIABLE: {'type': 'move', 'to': 'drone21', 'move': '->'}
[drone15] 10:34:29 - INFO - [WiFi] Broadcasting CHESS MOVE (attempt 1/6): {'type': 'move', 'to': 'drone21', 'move': '->', 'msg_id': '02a9', 'from': 'drone15'}
[drone15] 10:34:29 - INFO - [WiFi] Received ACK 02a9 from drone21
[drone15] 10:34:30 - INFO - [WiFi] ACK received for msg_id: 02a9
[drone15] 10:34:30 - INFO - Successfully sent move command to drone21
[drone15] 10:34:30 - INFO - Leader completed drone move: ->
[drone15] 10:34:30 - INFO - Our turn detected - checking leader status
[drone15] 10:34:31 - INFO - Leader drone15 is healthy
[drone15] 10:34:31 - INFO - Our turn detected - checking leader status
[drone15] 10:34:32 - INFO - Leader drone15 is healthy
[drone15] 10:34:32 - INFO - Our turn detected - checking leader status
[drone15] 10:34:33 - INFO - Leader drone15 is healthy
[drone15] 10:34:33 - INFO - Our turn detected - checking leader status
[drone15] 10:34:34 - INFO - Leader drone15 is healthy
[drone15] 10:34:35 - INFO - Our turn detected - checking leader status
[drone15] 10:34:36 - INFO - Leader drone15 is healthy
[drone15] 10:34:36 - INFO - === Leader run_once call ===
GOT BOARD: rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1
OUR TURN: black
SENDING FEN TO SF: rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1
==== RAW STOCKFISH DATA: {'text': 'Move e2 â†’ e4 (e4): [0.23]. The game is balanced. Depth 12.', 'captured': False, 'promotion': False, 'isCapture': False, 'isPromotion': False, 'isCastling': False, 'fen': 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1', 'type': 'bestmove', 'depth': 12, 'move': 'e2e4', 'eval': 0.23, 'centipawns': '23', 'mate': None, 'continuationArr': ['e7e5', 'g1f3', 'b8c6', 'f1b5', 'g8f6', 'd2d3', 'f8c5', 'c2c3', 'e8g8', 'e1g1', 'd7d5', 'e4d5', 'd8d5', 'b5c4', 'd5d6', 'b2b4', 'c5b6', 'b1d2'], 'debug': 'info depth 12 seldepth 29 multipv 1 score cp 23 nodes 382675 nps 31889583 hashfull 25 tbhits 0 time 12 pv e2e4 e7e5 g1f3 b8c6 f1b5 g8f6 d2d3 f8c5 c2c3 e8g8 e1g1 d7d5 e4d5 d8d5 b5c4 d5d6 b2b4 c5b6 b1d2', 'winChance': 52.115931524066205, 'taskId': 'hh447suwt', 'turn': 'w', 'color': 'w', 'piece': 'p', 'from': 'e2', 'to': 'e4', 'san': 'e4', 'flags': 'b', 'lan': 'e2e4', 'fromNumeric': '52', 'toNumeric': '54', 'continuation': [{'from': 'e7', 'to': 'e5', 'fromNumeric': '57', 'toNumeric': '55'}, {'from': 'g1', 'to': 'f3', 'fromNumeric': '71', 'toNumeric': '63'}]}
NOT OUR TURN: w != b
GOT MOVE: MoveDecision(uci='', from_cell='', to_cell='', score_cp=None, is_mate=False, reason=None, meta=None)
[drone15] 10:34:37 - INFO - MOVING ->
[drone15] 10:34:37 - INFO - Executing piece move -> with drone
PIECE TYPE: None
[drone15] 10:34:37 - WARNING - No piece found on  by camera, using fallback
[drone15] 10:34:37 - INFO - Piece king on  -> drone drone21
[drone15] 10:34:37 - INFO - Checking if target drone drone21 is alive before sending command
[drone15] 10:34:38 - INFO - Leader sending chess move: -> to drone drone21
BROADCASTING RELIABLE: {'type': 'move', 'to': 'drone21', 'move': '->'}
[drone15] 10:34:38 - INFO - [WiFi] Broadcasting CHESS MOVE (attempt 1/6): {'type': 'move', 'to': 'drone21', 'move': '->', 'msg_id': '108f', 'from': 'drone15'}
[drone15] 10:34:38 - INFO - [WiFi] Received ACK 108f from drone21
[drone15] 10:34:38 - INFO - [WiFi] ACK received for msg_id: 108f
[drone15] 10:34:38 - INFO - Successfully sent move command to drone21
[drone15] 10:34:38 - INFO - Leader completed drone move: ->
[drone15] 10:34:39 - INFO - Our turn detected - checking leader status
[drone15] 10:34:40 - INFO - Leader drone15 is healthy
[drone15] 10:34:40 - INFO - Our turn detected - checking leader status
[drone15] 10:34:41 - INFO - Leader drone15 is healthy
[drone15] 10:34:41 - INFO - Our turn detected - checking leader status
^Z
